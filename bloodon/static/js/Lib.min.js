Lib.ArabicKeyBoard=function(){this.board_=null;this.keyBoard_=null;this.currentActiveTarget_=null;this.isShift_=false;this.arabicPens_=null;this.isCap_=false;this._keysToJump=["8","116","17","16","13"];this.specialKeys_=[]};Lib.ArabicKeyBoard.STATES=["S","N","L"];Lib.ArabicKeyBoard.KEYS={32:{l:" ",u:" "},48:{l:"ُ",u:"0"},49:{l:"‟",u:"1"},50:{l:"”",u:"2"},51:{l:"«",u:"3"},52:{l:"»",u:"4"},53:{l:"ا",u:"5"},54:{l:"ً",u:"6"},55:{l:"ْ",u:"7"},56:{l:"ّ",u:"8"},57:{l:"ِ",u:"9"},65:{l:"ض",u:"۰"},66:{l:"ز",u:"%"},67:{l:"و",u:"&"},68:{l:"ي",u:"€"},69:{l:"ث",u:"۲"},70:{l:"ب",u:"]"},71:{l:"ل",u:"["},72:{l:"ا",u:"#"},73:{l:"ه",u:"۸"},74:{l:"ت",u:"أ"},75:{l:"ن",u:"إ"},76:{l:"م",u:"ئ"},77:{l:"ك",u:"ؤ"},78:{l:"ى",u:"؟"},79:{l:"خ",u:"۹"},80:{l:"ح",u:"¤"},81:{l:"ش",u:"'"},82:{l:"ق",u:"۳"},83:{l:"س",u:"$"},84:{l:"ف",u:"۵"},85:{l:"ع",u:"۷"},86:{l:"ر",u:"|"},87:{l:"ذ",u:">"},88:{l:"ء",u:"@"},89:{l:"غ",u:"۴"},90:{l:"ص",u:"۱"},186:{l:"د",u:"£"},187:{l:"ٍ",u:"+"},188:{l:"ة",u:"?"},190:{l:"٬",u:"‚"},191:{l:"'",u:"."},192:{l:"ط",u:"ؤ"},219:{l:"َ",u:"°"},220:{l:"ظ",u:"لا"},221:{l:"ج",u:"^"},222:{l:'"',u:"²"},223:{l:".",u:"!"},226:{l:"ﭫ",u:"<"},8:{l:"←",u:"←"},13:{l:"↲",u:"↲"}};Lib.ArabicKeyBoard.prototype.init=function(){var a,b;this.board_=$("#arabic_key_board")[0];this.arabicPens_=$(".write-arabic");a=this;b=this.board_;$(b).draggable().click(function(c){c.stopPropagation()});$("#20:eq(0)",b).click(function(c){a.manageCodes(20,c,true)}).each(function(){a.specialKeys_.push(this)});$(".keyboard",b).each(function(){var c=this.id;Lib.ArabicKeyBoard.KEYS[c]["object"]=this;this.value=Lib.ArabicKeyBoard.KEYS[c].l}).click(function(c){a.manageCodes(this.id,c||window.event,true);c.stopPropagation()});$("#17",b).click(function(d){a.isShift_=!a.isShift_;var c=a.isShift_;a.switchKeyBoardToCap(d);d.stopPropagation();a.switchState($(this),c);Lib.switchIconState($(this),c)}).each(function(){a.specialKeys_.push(this)});$("#arabic_key_board_hide:eq(0)",b).click(function(){a.disable()});this.arabicPens_.click(function(){a.enable($("#"+$(this).attr("for")+":eq(0)")[0])});$("#mobile_symbol_screen").click(function(){var c=this.__appClickToggleState;$(".keys-char",a.board_)[c?"show":"hide"]();$(".keys-symbol",a.board_)[!c?"show":"hide"]();Lib.switchIconState($(this),!c);this.__appClickToggleState=!this.__appClickToggleState})};Lib.ArabicKeyBoard.prototype.stopEvent=function(a){if(a.preventDefault){a.preventDefault()}if(a.returnValue){a.returnValue=false}};Lib.ArabicKeyBoard.prototype.FireKey=function(c,d,b){var a=this.getState(b),e=c.id;if(e==="8"){this.clearText(d,b)}else{if(e==="13"){this.appendCharacter(d,"\n")}else{this.appendCharacter(d,Lib.ArabicKeyBoard.KEYS[e][a])}}this.setColor(c,Object(a))};Lib.ArabicKeyBoard.prototype.getState=function(b){var c=(this.isCap_?"u":"l"),a=this.isShift_;if(a){c=(!this.isCap_?"u":"l")}return c};Lib.ArabicKeyBoard.prototype.appendCharacter=function(c,b){if(!$.browser.mozilla){c.setRangeText("")}var d=c.value.substr(c.selectionStart),a=c.value.substr(0,c.selectionStart);$(c).val(a+b+d).keydown().keypress().keyup();this.moveCaretTo(c,a.length+1)};Lib.ArabicKeyBoard.prototype.clearText=function(b){if(!$.browser.mozilla){b.setRangeText("")}var c=b.value.substr(b.selectionStart),a=b.value.substr(0,b.selectionStart);$(b).val(a.substr(0,a.length-1)+c).keydown().keypress().keyup();this.moveCaretTo(b,a.length-1)};Lib.ArabicKeyBoard.prototype.moveCaretTo=function(c,a){if(c.setSelectionRange){c.focus();c.setSelectionRange(a,a)}else{if(c.createTextRange){var b=c.createTextRange();b.collapse(true);b.moveEnd("character",a);b.moveStart("character",a);b.select()}}};Lib.ArabicKeyBoard.prototype.setColor=function(a,b){$(a).css({backgroundColor:"orange"});setTimeout(function(){$(a).css({backgroundColor:""})},250)};Lib.ArabicKeyBoard.prototype.handleKey=function(b){var c=b||window.event,a=this;this.manageCodes(c.keyCode,c,false)};Lib.ArabicKeyBoard.prototype.switchKeyBoardToCap=function(b){var a=this.getState(b);$(".keyboard",this.board_).each(function(){this.value=Lib.ArabicKeyBoard.KEYS[this.id][a]})};Lib.ArabicKeyBoard.prototype.manageCodes=function(h,c,b){var a=String(h),g=Lib.ArabicKeyBoard.currentActiveTarget_,f=c||window.event;if(a==="27"){this.disable();return}if(a==="20"){this.isCap_=!this.isCap_;var d=this.isCap_;$capKey=$("#20:eq(0)",this.board_);this.switchState($capKey,d);Lib.switchIconState($capKey,d);this.switchKeyBoardToCap(f);return}if(a==="17"||a==="16"){this.isShift_=!this.isShift_;var d=this.isShift_;$shift=$("#17:eq(0)",this.board_);this.switchState($shift,d);Lib.switchIconState($shift,d);this.switchKeyBoardToCap(f);return}if(b){this.stopEvent(f)}if(!f.ctrlKey){if(Lib.ArabicKeyBoard.KEYS[a]){if(!b){this.stopEvent(f)}this.FireKey(Lib.ArabicKeyBoard.KEYS[a].object,g,f)}}};Lib.ArabicKeyBoard.prototype.switchState=function(d,c){var b="key-state-",a=b+(c?"active":"idle")+" "+b+(c?"idle":"active");d.toggleClass(a)};Lib.ArabicKeyBoard.prototype.enable=function(d){var f=$(this.board_).innerWidth()/6,b=$(d);b.show();var e=b.offset(),a=b.innerHeight(),c=this;$(this.board_).css({left:(e.left-f)+"px",top:e.top+a+10+"px"}).show();Lib.Widget.addToWidgets(this.board_,function(){$(document).unbind("keydown",$.proxy(c.handleKey,c))});$(document).bind("keydown",$.proxy(c.handleKey,c));b.show().select();Lib.ArabicKeyBoard.currentActiveTarget_=d};Lib.ArabicKeyBoard.prototype.disable=function(){$(this.board_).hide();$(document).unbind("keydown",this.handleKey)};$(document).ready(function(){BO.keyboard=new Lib.ArabicKeyBoard();BO.keyboard.init()});"use strict";var Lib;Lib=Lib||{};Lib.getObjFromString=function(string){try{return eval("(function (){ return"+($.browser.msie?string:string.trim())+"}).call()")}catch(e){return null}};Lib.getAttribute=function(b,a){if($){return $(b).attr(a)}if(!b.hasAttribute(a)){return null}return b.attributes[a].value};Lib.getAttributeAsObject=function(b,a){return Lib.getObjFromString(Lib.getAttribute(b,a))};Lib.getRandomColor=function(){var c="0123456789ABCDEF".split("");var a="#";for(var b=0;b<6;b++){a+=c[Math.round(Math.random()*15)]}return a};Lib.trans=function(a){return BloodOn.TRANSLATIONS[a]};Lib._add=function(a){BloodOn.TRANSLATIONS.concat(a)};Lib.switchIconState=function(b,a){b.find("i")[(a?"add":"remove")+"Class"]("icon-white")};Lib.isEmpty=function(a){return($(a).val().replace(/^\s+|\s+$/g,"").length>0)};Lib.isEmail=function(a){return/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i.test(a)};Lib.popFromArray=function(c,b){var a=c.indexOf(b);if(a>-1){c.splice(a,1)}return c};Lib.Widget={};Lib.Widget._widgets=[];Lib.Widget.addToWidgets=function(c,b,a){if(!c.__libWidget){c.__libWidget={};c.__libWidget.options=b;c.__libWidget.fn=a;Lib.Widget._widgets.push(c)}};Lib.Widget.overlay=function(c,g){if(!c){return}if(!c.__LibMask){var f=$(c).offset(),d=$(c).innerWidth(),b=$(c).innerHeight(),e=g||Lib.trans("loading"),a=$('<div style="top: 9px; position: absolute;z-index: 5000;"></div>');$('<i class="ajax-loader"></i>').appendTo(a);a.css({width:d,height:b,left:f.left,top:f.top}).addClass("overlay text-center");a.appendTo("body");c.__LibMask=a}};Lib.Widget.unoverlay=function(a){if(!a){return}if(a.__LibMask){a.__LibMask.remove()}};Lib.Widget.createMessage=function(e,d,a){var c='<div class="alert-message alert-'+d+'"> <a class="close" href="#">×</a><p>'+e+"</p></div>";var b=$(c);b.css({position:"absolute",zIndex:"2000",top:"0px",margin:"20px"}).appendTo("body");if(a){}setTimeout(function(){b.remove()},6000)};var WidgetHandler=function(a){if(a.keyCode==27){return}$(Lib.Widget._widgets).each(function(){var b=this.__libWidget;if(b.options.hide){$(this).hide()}if(b.fn){b.fn()}})};$(document).bind("keydown click",WidgetHandler);